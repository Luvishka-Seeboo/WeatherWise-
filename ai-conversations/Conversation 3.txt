
----------------------------------
Tool: ChatGPT
Date: 2025-05-24
----------------------------------

Me: I'm getting an error when calling the OpenWeatherMap API.

AI: Can you share the exact error message?

Me: Sure, it says: "requests.exceptions.HTTPError: 401 Client Error: Unauthorized".

AI: That usually means the API key is missing or invalid. Are you passing your API key correctly in the request?

Me: I'm using this line: params = {"q": f"{city},MU", "appid": api_key, "units": "metric"}

AI: That looks correct syntactically. Can you double-check if your `api_key` variable actually contains your API key?

Me: Hmm, I might have left it blank during testing.

AI: That would explain it. Try printing `api_key` before the request to verify. Also, make sure you’re not using expired or incorrect credentials.

Me: Okay, I’ll check.

AI: If you're using a widget, make sure to click the “Show Weather” button after entering the API key. The value must be captured before the request executes.

Me: Got it. It’s working now. Thanks!
def get_weather(city, api_key):
    url = "https://api.openweathermap.org/data/2.5/weather"
    params = {"q": city, "appid": api_key, "units": "metric"}
    try:
        response = requests.get(url, params=params)
        response.raise_for_status()
        data = response.json()
        weather_info = {
            "name": data.get("name", "Unknown location"),
            "temp": data["main"]["temp"],
            "feels_like": data["main"]["feels_like"],
            "humidity": data["main"]["humidity"],
            "wind_speed": data["wind"]["speed"],
            "description": data["weather"][0]["description"].title()
        }

